(function(window){if(!window.X5Slider){window.X5Slider=function(){window.X5Slider.init()};window.X5Slider.timeouthandle=null;window.X5Slider.iter_interval=1e3;window.X5Slider.init=function(){if(window.X5Slider.timeouthandle!=null){return window.X5Slider.timeouthandle}return window.X5Slider.setNextIteration()};window.X5Slider.setNextIteration=function(){var self=window.X5Slider;var curSlide=$(".x5slider").find(".showing");curSlide.each(function(index1,value1){window.X5Slider.loadImagesForSlide($(value1))});window.X5Slider.timeouthandle=setTimeout(function(){self.iteration()},window.X5Slider.iter_interval);return window.X5Slider.timeouthandle};window.X5Slider.iteration=function(){console.log("iteration");console.log((new Date).toTimeString());var sliders=$(".x5slider");if(sliders.length<=0){console.log("clear слайдеров нет");window.X5Slider.clear();return false}sliders.each(function(index,value){var curSlider=$(value);var lasttime=curSlider.attr("data-lasttime");var interval=curSlider.attr("data-interval");var slides=sliders.children();if(slides.length>1){if(interval==undefined){curSlider.attr("data-interval",window.X5Slider.iter_interval);interval=window.X5Slider.iter_interval}var curTime=Date.now();if(lasttime==undefined){curSlider.attr("data-lasttime",Date.now());curSlider.attr("data-currentslide",Date.now())}else if(curTime-lasttime>interval){var currentSlide=sliders.find(".showing").first();var currentSlideIndex=currentSlide.index();var nextSlideIndex=(currentSlideIndex+1)%slides.length;var nextSlide=slides.eq(nextSlideIndex);window.X5Slider.loadImagesForSlide(nextSlide);slides.eq(currentSlideIndex).removeClass("showing");nextSlide.addClass("showing");curSlider.attr("data-lasttime",Date.now())}}});window.X5Slider.setNextIteration()};window.X5Slider.loadImagesForSlide=function(slide){var imgs=slide.find("img");imgs.each(function(index1,value1){var img=$(value1);var preloadsrc=img.attr("data-img-src");var src=img.attr("src");if(preloadsrc!=undefined&&src!=preloadsrc)img.attr("src",preloadsrc)})};window.X5Slider.clear=function(){if(window.X5Slider.timeouthandle!=null)clearTimeout(window.X5Slider.timeouthandle);window.X5Slider.timeouthandle=null}}})(window);